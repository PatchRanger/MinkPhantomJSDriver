{% autoescape false %}
(function (xpath, value) {
function getElement(xpath) {
var result;
result = document.evaluate(xpath, document, null, XPathResult.ORDERED_NODE_SNAPSHOT_TYPE, null);
if (result.snapshotLength !== 1) {
return null;
}
return result.snapshotItem(0);
}

function isSelect(element) {
if (element === null) {
return false;
}
return (element.tagName.toLowerCase() == "select");
}

function isRadioInput(element) {
if (element === null) {
return false;
}
return ((element.tagName.toLowerCase() == "input") && element.getAttribute("type").toLowerCase() == "radio");
}

function doOptionSelect(element, value) {
var i;
for (i = 0; element.options.length; i++) {
if (element.options[i].value == value) {
element.selectedIndex = i;
return true;
}
}
return false;
}

function doRadioSelect(element, value) {
if (element.value == value) {
element.setAttribute("checked", "checked");
return true;
}

var formElements = element.form.elements,
name = element.getAttribute('name'), nodeElement;

if (!name) {
return false;
}

for (var i = 0; i < formElements.length; i++) {
nodeElement = formElements[i];
if (element.tagName.toLowerCase() == 'input' && element.type.toLowerCase() == 'radio' && nodeElement.name === name) {
if (value === nodeElement.value) {
nodeElement.setAttribute("checked", "checked");
return false;
}
}
}

return false;
}

var element = getElement(xpath);
if (!isSelect(element) && !isRadioInput(element)) {
return false;
}

if (isSelect(element)) {
return doOptionSelect(element, value);
}

if (isRadioInput(element)) {
return doRadioSelect(element, value);
}

return false;
}('{{ xpath }}', '{{ value }}'));
{% endautoescape %}
